# Phase 3: 音素化エンジン ライセンス評価レポート

## 1. エグゼクティブサマリー

uPiperの音素化エンジン選定において、ライセンスの観点から各選択肢を評価しました。
**推奨事項**: MITライセンスの独自実装を主軸とし、オプションとしてFliteを採用する。

## 2. 評価対象

### 2.1 検討した音素化エンジン

| エンジン | ライセンス | 言語サポート | 品質 | サイズ |
|---------|-----------|-------------|------|--------|
| eSpeak-NG | GPL v3 | 100+ | 優秀 | 10-15MB |
| Flite (Festival Lite) | MIT | 英語中心 | 良好 | 2-5MB |
| 独自実装 | MIT (予定) | カスタム | 可変 | 1-3MB |
| Julius (音素列) | BSD | 日本語 | 良好 | 5MB |
| Phonemizer | GPL v3 | 多言語 | 優秀 | Python依存 |

## 3. ライセンス詳細分析

### 3.1 GPL v3 (eSpeak-NG, Phonemizer)

**問題点**:
- 動的リンクでも派生物と見なされる可能性
- ソースコード開示義務
- 商用利用時の制約

**回避策**:
1. **プロセス分離**: 別プロセスとして実行
2. **ネットワーク分離**: REST API経由
3. **オプショナル化**: ユーザー選択でインストール

### 3.2 MIT (Flite)

**利点**:
- 商用利用可能
- ソースコード開示不要
- Unityプロジェクトとの統合が容易

**制限**:
- 主に英語サポート
- 拡張性に制限

### 3.3 独自実装

**利点**:
- 完全なコントロール
- ライセンス自由度
- Unity最適化可能

**課題**:
- 開発工数
- 品質保証

## 4. 技術的実現可能性

### 4.1 独自実装アプローチ

```
方式1: ルールベース
- CMU Pronouncing Dictionary (パブリックドメイン)
- 基本的なG2P (Grapheme-to-Phoneme) ルール
- 実装工数: 3-5日

方式2: 統計的手法
- 既存コーパスから学習
- Hidden Markov Model / CRF
- 実装工数: 5-7日

方式3: ハイブリッド
- 辞書 + ルール + 軽量ML
- バランスの取れたアプローチ
- 実装工数: 4-6日
```

### 4.2 Flite統合

```
利点:
- 実績のあるコード
- 軽量実装
- C言語ベース

統合方法:
- ソースコードレベルで統合
- CMakeビルドシステム対応
- 実装工数: 2-3日
```

## 5. 推奨実装戦略

### 5.1 フェーズ1: 基本実装（MIT準拠）

1. **コア実装**: 独自ルールベースエンジン
   - 英語基本サポート
   - CMU辞書 + G2Pルール
   
2. **拡張オプション**: Flite統合
   - より高品質な英語音素化
   - バックエンドとして選択可能

### 5.2 フェーズ2: オプショナル拡張

- eSpeak-NGプラグイン（別配布）
- Web APIバックエンド
- ユーザー選択によるインストール

## 6. 実装決定

### 6.1 採用方針

```csharp
// ライセンスセーフな基本構成
public class PhonemizerConfiguration
{
    // 必須（MITライセンス）
    public bool EnableRuleBasedEngine = true;
    public bool EnableFliteEngine = true;
    
    // オプショナル（ユーザー責任）
    public bool EnableESpeakPlugin = false;
    public bool EnableWebApiBackend = false;
}
```

### 6.2 ディレクトリ構造

```
Assets/uPiper/
├── Runtime/
│   └── Phonemizers/
│       ├── Core/              # MITライセンス
│       │   ├── RuleBased/
│       │   └── Flite/
│       └── Plugins/           # オプショナル
│           └── ESpeakNG/      # 別配布
```

## 7. リスク管理

| リスク | 影響 | 対策 |
|--------|------|------|
| 独自実装の品質 | 中 | 段階的改善、コミュニティフィードバック |
| Fliteの言語制限 | 低 | 他言語は独自実装で対応 |
| 将来の拡張性 | 低 | プラグインアーキテクチャで対応 |

## 8. 結論

**推奨事項**:
1. 独自ルールベース実装を主軸とする（MITライセンス）
2. Fliteを品質向上オプションとして統合
3. GPL系ライブラリはオプショナルプラグインとして分離

この方針により、ライセンスリスクを回避しつつ、実用的な音素化機能を提供できます。